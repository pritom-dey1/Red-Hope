{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Basic Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Page Title -->
    <title>{% block title %}{% endblock title %} | RED HOPE</title>
    
    <!-- External Stylesheets -->
     <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.css">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <!-- ============================= -->
    <!-- HEADER & NAVIGATION SECTION -->
    <!-- ============================= -->
    <header>
        <nav>
            <!-- Website Logo -->
            <div class="logo">
                <img src="{% static 'img/logo.webp' %}" alt="Red Hope Logo">
            </div>

            <!-- Navigation Links -->
            <div class="links">
                <a href="{% url 'home' %}">HOME</a>
                <a href="{% url 'about'%}">ABOUT</a>
                <a href="{% url 'pluse' %}">PULSE</a>
                <a href="{% url 'heroes'%}">OUR HEROES</a>
            </div>

            <!-- Login Button -->
<div class="button">
    {% if user.is_authenticated and user.profile %}
        {% if request.resolver_match.url_name == user.profile.role|add:"_dashboard" %}
            <!-- যদি user dashboard এ থাকে -->
            <form action="{% url 'logout' %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn">LOG OUT</button>
            </form>
        {% else %}
            <a href="{% url user.profile.role|add:'_dashboard' %}">
                <button class="btn">DASHBOARD</button>
            </a>
        {% endif %}
    {% else %}
        <a href="{% url 'login' %}">
            <button class="btn">LOG IN</button>
        </a>
    {% endif %}
</div>
        </nav>
    </header>

    <!-- ============================= -->
    <!-- MAIN CONTENT SECTION -->
    <!-- ============================= -->
    
   
        
    <div class="main">
        {% block main %}
        {% endblock main %}
           <!-- ============================= -->
    <!-- FOOTER SECTION -->
    <!-- ============================= -->
    <footer>
        <div class="footer_warper">

            <!-- Top Footer (Contact & Form) -->
            <div class="footer_top">
                <div class="footer_left">
                    <p>CONTACT US</p>
                    <h2>
                        LET'S BE OUR HERO — DONATE BLOOD <br>
                        SAVE LIVES!
                    </h2>
                </div>

                <!-- Contact Form -->
            <div class="footer_right">
    <form id="contactForm">
        {% csrf_token %}
        <input type="text" name="name" placeholder="Enter Your Name">
        <input type="email" name="email" placeholder="Enter Your Email">
        <textarea name="description" placeholder="Give Your Description"></textarea>
        <button type="submit" class="btn">Send Now</button>
    </form>

    <p id="formMessage" style="text-align: center;  margin-top:10px;"></p>
</div>

            </div>

            <!-- Bottom Footer -->
            <div class="footer_bottom">
                <p>
                    © 2025 Donate Blood, Save Lives. Designed and developed with ❤️ by Pritom Dey.
                </p>
            </div>
        </div>
    </footer>
    </div>

 

    <!-- ============================= -->
    <!-- JAVASCRIPT FILES & CDN LINKS -->
    <!-- ============================= -->
     <script>
        
document.getElementById("contactForm").addEventListener("submit", function(e) {
    e.preventDefault();

    let formData = new FormData(this);
    let button = this.querySelector("button"); // Send Now button টা ধরলাম

    fetch("{% url 'save_contact' %}", {
        method: "POST",
        body: formData,
        headers: {
            "X-Requested-With": "XMLHttpRequest"
        }
    })
    .then(response => response.json())
    .then(data => {
        let msg = document.getElementById("formMessage");
        if (data.success) {
            msg.style.color = "green";
            msg.innerText = data.message;
            this.reset();

            // Button effect (success)
            button.innerText = "Sended ";
            button.style.backgroundColor = "green";

            setTimeout(() => {
                button.innerText = "Send Now";
                button.style.backgroundColor = "";
            }, 2000);

        } else {
            msg.style.color = "red";
            msg.innerText = data.message;
        }
    })
    .catch(error => {
        console.error("Error:", error);
    });
});

     </script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- GSAP (for animations & scroll effects) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.1/ScrollToPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/ScrollTrigger.min.js" 
        integrity="sha512-P2IDYZfqSwjcSjX0BKeNhwRUH8zRPGlgcWl5n6gBLzdi4Y5/0O4zaXrtO4K9TZK6Hn1BenYpKowuCavNandERg==" 
        crossorigin="anonymous" referrerpolicy="no-referrer">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js" 
        integrity="sha512-NcZdtrT77bJr4STcmsGAESr06BYGE8woZdSdEgqnpyqac7sugNO+Tr4bGwGF3MsnEkGKhU2KL2xh6Ec+BqsaHA==" 
        crossorigin="anonymous" referrerpolicy="no-referrer">
    </script>

    <!-- Locomotive Scroll -->
    <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js"></script>
    
    <!-- Custom JS File -->
    <script type="module" src="{% static 'js/app.js' %}"></script> 
</body>
</html>
